---
title: |
  | Supplementary Materials for
  | Durably reducing transphobia: a field experiment on door-to-door canvassing
output:
  html_document:
    df_print: paged
---

David E. Broockman,^1^* Joshua L. Kalla^2^

^1^ Graduate School of Business, Stanford University

^2^ Department of Political Science, University of California, Berkeley

*Correspondence to: dbroockman@stanford.edu.

```{r, include=FALSE}
rm(list = ls())
library(foreign)
library(pander)
library(plyr)
library(sandwich)
library(lmtest)
library(data.table)
library(ggplot2)
library(reshape2)
library(glmnet)

wd <- '' # enter your working directory here
set.seed(5953921)

data <- read.dta(paste0(wd, 'broockman_kalla_replication_data.dta'))
# Note: Variables that begin with vf_ come from the voter file.
# Variables that end with _t0 were collected on the baseline survey.
```




~~~
set seed 54811set seed 54811set seed 54811
set sortseed 94786

//Average the scale at the HH level for blocking at the HH level
preserve

bysort hh_id: egen scale_t0_hh_avg = mean(scale_for_blocking_t0)
keep hh_id scale_t0_hh_avg
duplicates drop hh_id, force

//Generate pairs of two HHs
sort scale_t0_hh_avg
egen block_ind=seq(), block(2)
gen rand=runiform()
sort block rand
by block: gen treat_ind=_n==1

keep treat_ind block_ind hh_id
tempfile ind_rand
save `ind_rand'
restore

merge m:1 hh_id using `ind_rand', nogen
~~~



### Items Capturing Primary Outcomes Appearing on All Surveys

The below items appeared on multiple surveys; the # sign below will be replaced with the survey number in our analysis:

* The baseline survey is survey 0;
* the 3-day survey is survey 1;
* the 3-week survey is survey 2;
* the 6-week survey is survey 3, and;
* the 3-month survey is survey 4.

Item names appear in bold next to each item. For the remainder of the paper we will refer to these items by these bolded names.

* **miami_trans_law_t#**: Miami-Dade county recently passed a law that prohibits discrimination in housing, employment and public accommodations based on gender identity and expression, a category that includes transgender men and women [for **miami_trans_law_withdef_t#**, adds the phrase here, "(people who were designated one gender at birth, but now identify as a different gender)."]. Do you favor or oppose this new law?
* **miami_trans_law2_t#**: Some people say it's important to protect transgender people from discrimination in housing and employment. Other people have concerns about society becoming too accepting of transgender people, and do not want transgender people included in our non-discrimination law. What do you think? Do you agree or disagree that Miami law should protect transgender people [for **miami_trans_law2_withdef_t#**, adds the phrase here, "(people who were designated one gender at birth, but now identify as a different gender)."] from discrimination?
* **trans_law_post_ad_t3**: On the third survey only, we asked about the law again after showing an opposition video: "We've mentioned that Miami-Dade county recently passed a law that prohibits discrimination in housing, employment and public accommodations based on gender identity and expression, a category that includes transgender men and women (people who were designated one gender at birth, but now identify as a different gender). After seeing the video, do you favor or oppose this new law?" This item does not appear in any of the scales.
* **therm_trans_t#**: Feeling thermometer towards trans people (0-100) (From *(39)*)
* **gender_norm_abnormal_t#**: A man who identifies as a woman is psychologically abnormal (Modification from (*40, 41*)).
* **gender_norm_moral_t#**: It is morally wrong for a man to present himself as a woman in public (Modification from (*40*)).
* **gender_norm_trans_moral_wrong_t#**: Saying you are a gender that is different than the one you were born with is morally wrong (Modification from (*40, 41*)).
* **gender_norm_sexchange_t#**: I would support a friend choosing to have a sex change (Modification from (*42*)).

Starting with the second post-treatment survey, we also asked the below two items.  These items were composed and added after examining the results from the first post-treatment survey. An amended pre-analysis plan was submitted to EGAP to reflect the addition of these two questions.

* **trans_teacher_t#**: Transgender women (people who identify as women but were designated male at birth) should be allowed to serve as public school teachers.
* **trans_bathroom_t#**: It would be wrong to allow a transgender woman (a person who identifies as a woman but was designated male at birth) to use the woman’s restroom (Modification from (*40*)).

### Outcome Indices

In our pre-analysis plan, we specified that we would combine multiple items into indices to test hypotheses. Combining outcomes into an index increases precision by decreasing survey measurement error and limits the potential for multiple hypothesis testing (*33*).

The indicies, to be described momentarily, are as follows:

* **all.dvs.t#**: An index of all primary outcomes, created to test the omnibus hypothesis that the treatment had any effects.
* **trans.tolerance.dv.t#**: An index of outcomes from all.dvs.t# capturing acceptance and tolerance towards -- instead of prejudice and stigma towards -- transgender people; this is all primary outcomes except for the two items about the law.
* **miami_trans_law_t#_avg**: An index of the two items about Miami's law protecting transgender people from discrimination in housing, employment, and public accomodations. Because these items were Likert scales with the same number of points and there were only two of them, the index is a simple average of the two items.
* **gender_nonconformity_t#**: Distinct from measuring transgender tolerance, we also constructed a scale capturing gender norms. As stated in our pre-analysis plan, effects on this measure represented a secondary hypothesis and this index is not a primary outcome of interest. (However, there do appear to be effects on this measure as well, but we do not discuss these in the main text due to space constraints.)

#### Pre-Specified Index of All Primary Outcomes

In the pre-analysis plan we indicated that the main hypothesis test will be whether an index of all primary outcomes shows statistical significance. We list these outcomes for each survey below. (In the pre-analysis plan we called this "main.dv.")

Note that we code the scale such that larger, more positive values indicate more tolerance and less prejudice.

```{r}
all.dv.names.t1 <- c('miami_trans_law_t1', 'miami_trans_law2_t1', 'therm_trans_t1',
                      'gender_norm_sexchange_t1', 'gender_norm_moral_t1',
                      'gender_norm_abnormal_t1', 'gender_norm_trans_moral_wrong_t1')

all.dv.names.t2 <- c('miami_trans_law_t2', 'miami_trans_law2_t2', 'therm_trans_t2',
                      'gender_norm_sexchange_t2', 'gender_norm_moral_t2',
                      'gender_norm_abnormal_t2', 'gender_norm_trans_moral_wrong_t2')

all.dv.names.t3 <- c('miami_trans_law_withdef_t3', 'miami_trans_law2_withdef_t3', 
                      'therm_trans_t3', 'gender_norm_sexchange_t3', 'gender_norm_moral_t3',
                      'gender_norm_abnormal_t3','gender_norm_trans_moral_wrong_t3')

all.dv.names.t4 <- c('miami_trans_law_withdef_t4', 'miami_trans_law2_withdef_t4', 
                      'therm_trans_t4', 'gender_norm_sexchange_t4', 'gender_norm_moral_t4',
                      'gender_norm_abnormal_t4', 'gender_norm_trans_moral_wrong_t4')


```

```{r}
show(all.dv.names.t1)
```


#### Transgender Tolerance Index

After analyzing the 3 day survey results, we found a clear difference between the treatment effects on the two questions about the law and the treatment effects on the items which captured tolerance and prejudice. We anticipated wanting to discuss these themes separately in the paper. Therefore, we decided to split the items in the omnibus index into two indicies: first, we kept track of the two law items in one index (miami_trans_law_t#_avg); second, we created a second index with all the remaining main outcome items, which focused on the questions related to prejudice (trans_prejudice_dv_t#). These changes were specified in an amended pre-analysis plan prior to finishing data collection for or analyzing any data from the 3-week survey.

Beginning with the 3-week survey we also added two items to the transgender tolerance index that appeared on the 3-week survey for the first time, one about whether transgender women should be permitted to serve as public school teachers and the other about whether transgender women should be allowed to use the woman's restroom (see **trans_teacher_t#** and **trans_bathroom_t#** defined above). These items were composed and added prior to the analysis of the 3-week or the 3-day survey. See "Rationale for Outcome Selection."

Note that we code the scale such that larger, more positive values indicate more tolerance and less prejudice.

```{r}
trans.tolerance.dvs.t0 <- c('therm_trans_t0', 'gender_norms_sexchange_t0',
                            'gender_norms_moral_t0', 'gender_norms_abnormal_t0')

trans.tolerance.dvs.t1 <- c('therm_trans_t1', 'gender_norm_sexchange_t1',
                            'gender_norm_moral_t1', 'gender_norm_abnormal_t1',
                            'gender_norm_trans_moral_wrong_t1')

trans.tolerance.dvs.t2 <- c('therm_trans_t2', 'gender_norm_sexchange_t2',
                            'gender_norm_moral_t2', 'gender_norm_abnormal_t2',
                            'gender_norm_trans_moral_wrong_t2',
                            'trans_teacher_t2', 'trans_bathroom_t2')

trans.tolerance.dvs.t3 <- c('therm_trans_t3', 'gender_norm_sexchange_t3',
                            'gender_norm_moral_t3', 'gender_norm_abnormal_t3',
                            'gender_norm_trans_moral_wrong_t3',
                            'trans_teacher_t3', 'trans_bathroom_t3')

trans.tolerance.dvs.t4 <- c('therm_trans_t4', 'gender_norm_sexchange_t4',
                            'gender_norm_moral_t4', 'gender_norm_abnormal_t4',
                            'gender_norm_trans_moral_wrong_t4',
                            'trans_teacher_t4', 'trans_bathroom_t4')
```

#### Law Items Index

As mentioned above, we created two separate indicies that differentiated between the prejudice questions and the questions about the law. Below are the indices created for each survey wave about the law. 

```{r}
trans.law.dvs.t0 <- c('miami_trans_law_t0', 'miami_trans_law2_t0')
trans.law.dvs.t1 <- c('miami_trans_law_t1', 'miami_trans_law2_t1')
trans.law.dvs.t2 <- c('miami_trans_law_t2', 'miami_trans_law2_t2')
# Note: Beginning with t3, the definition was added. 
trans.law.dvs.t3 <- c('miami_trans_law_withdef_t3', 'miami_trans_law2_withdef_t3')
trans.law.dvs.t4 <- c('miami_trans_law_withdef_t4', 'miami_trans_law2_withdef_t4')
```

#### Secondary Outcome: Gender Non-Conformity Index

We were also interested in whether the treatment would change attitudes towards gender non-conformity more generally (individuals can be gender non-conforming without being transgender). We pre-registered this hypothesis as a secondary hypothesis and not the main hypothesis of interest. However, we present the results below for completeness. Our measure of gender non-conformity consisted of an index built from the following items:

* **gender_norm_looks_t#**: To keep children from being confused, it's better when men look and act like men, and women look and act like women.
* **gender_norm_rights_t#**: Men and women should have equal rights, but men and women are not the same; it's normal for men to act like men, and women to act like women.
* **gender_norm_dress_t#**: Men should dress like men and women should dress like women. (This item was only added beginning with t2, the 3 week follow-up survey.)

```{r}
gender.nonconformity.t0 <- c('gender_norm_looks_t0', 'gender_norm_rights_t0')
gender.nonconformity.t1 <- c('gender_norm_looks_t1', 'gender_norm_rights_t1')
# Note: Beginning with t2, an additional item was added to the measure. 
gender.nonconformity.t2 <- c('gender_norm_looks_t2', 'gender_norm_rights_t2', 
                            'gender_norm_dress_t2')
gender.nonconformity.t3 <- c('gender_norm_looks_t3', 'gender_norm_rights_t3', 
                            'gender_norm_dress_t3')
gender.nonconformity.t4 <- c('gender_norm_looks_t4', 'gender_norm_rights_t4', 
                            'gender_norm_dress_t4')
```

### Reverse Coded Items

We reverse the reverse-coded items, such that positive values on all variables would indicate more tolerant attitudes and success for the intervention.

```{r, include = FALSE}
reverse.coded.items <- c('gender_norms_moral_t0', 'gender_norm_moral_t1',
                         'gender_norm_moral_t2', 'gender_norm_moral_t3',
                         'gender_norm_moral_t4', 'gender_norms_abnormal_t0',
                         'gender_norm_abnormal_t1', 'gender_norm_abnormal_t2',
                         'gender_norm_abnormal_t3','gender_norm_abnormal_t4',
                         'gender_norm_trans_moral_wrong_t1', 
                         'gender_norm_trans_moral_wrong_t2',
                         'gender_norm_trans_moral_wrong_t3',
                         'gender_norm_trans_moral_wrong_t4',
                         'trans_bathroom_t2', 'trans_bathroom_t3',
                         'trans_bathroom_t4', 'gender_norm_looks_t0',
                         'gender_norm_looks_t1', 'gender_norm_looks_t2',
                         'gender_norm_looks_t3', 'gender_norm_looks_t4',
                         'gender_norm_rights_t0', 'gender_norm_rights_t1',
                         'gender_norm_rights_t2', 'gender_norm_rights_t3',
                         'gender_norm_rights_t4', 'gender_norm_dress_t2',
                         'gender_norm_dress_t3', 'gender_norm_dress_t4')
for(item in reverse.coded.items) data[,item] <- -1 * data[,item]
```

### Procedue for Combining Outcomes into Indices

We pre-specified the procedure below to calculate each index. In the interest of transparency we provide the full code.

Note that we code all indicies such that higher values on the indices indicate more tolerance and success of the intervention.

```{r}
# Compute factor analysis outcome
compute.factor.dv <- function(dv.names, respondent.booleans, print.loadings = TRUE){
  responders <- data[respondent.booleans,]
  
  # Factor analysis
  factor.obj <- princomp(responders[, dv.names], cor=TRUE)
  if(print.loadings) print(loadings(factor.obj))
  dv <- as.vector(factor.obj$scores[,1])
  
  # More positive values on the factor should indicate more tolerance; reverse otherwise.
  if(cor(dv, responders$miami_trans_law_t0, use="complete.obs") < 0) dv <- -1 * dv
  
  # Put in the order of the main data frame
  dv.in.order <- dv[match(data$id, responders$id)]
  
  # Rescale to mean 0 sd 1 in placebo group; treatment effects can then be interpreted
  # as the effect in standard deviations the treatment would have among an untreated
  # population.
  dv.in.order <- (dv.in.order - mean(dv.in.order[!data$treat_ind], na.rm=TRUE)) /
    sd(dv.in.order[!data$treat_ind], na.rm=TRUE)
  
  return(as.vector(dv.in.order))
}
```

```{r, include=FALSE}
# In this code section we implement the procedures describe previously.

# First, misc. housekeeping.
# Recode age for small number of observations where it is missing.
data$vf_age[which(is.na(data$vf_age))] <- mean(data$vf_age, na.rm=TRUE)

# Language of interview
data$survey_language_es[is.na(data$survey_language_es)] <-
    data$survey_language_t0[is.na(data$survey_language_es)] == "ES"
data$survey_language_es[is.na(data$survey_language_es)] <- mean(data$survey_language_es, na.rm = TRUE)

# We subset to only those who came to door. contacted = came to door.
full.data <- data
data <- subset(data, contacted == 1)

# Compute the DVs in line with the above procedures.

# Omnibus DV of all primary outcomes.
data$all.dvs.t1 <- compute.factor.dv(all.dv.names.t1, data$respondent_t1==1 & !is.na(data$respondent_t1))
data$all.dvs.t2 <- compute.factor.dv(all.dv.names.t2, data$respondent_t2==1 & !is.na(data$respondent_t2))
data$all.dvs.t3 <- compute.factor.dv(all.dv.names.t3, data$respondent_t3==1 & !is.na(data$respondent_t3))
data$all.dvs.t4 <- compute.factor.dv(all.dv.names.t4, data$respondent_t4==1 & !is.na(data$respondent_t4))

# Trans tolerance DV.
data$trans.tolerance.dv.t0 <- compute.factor.dv(trans.tolerance.dvs.t0, data$respondent_t0==1 & !is.na(data$respondent_t0))
data$trans.tolerance.dv.t1 <- compute.factor.dv(trans.tolerance.dvs.t1, data$respondent_t1==1 & !is.na(data$respondent_t1))
data$trans.tolerance.dv.t2 <- compute.factor.dv(trans.tolerance.dvs.t2, data$respondent_t2==1 & !is.na(data$respondent_t2))
data$trans.tolerance.dv.t3 <- compute.factor.dv(trans.tolerance.dvs.t3, data$respondent_t3==1 & !is.na(data$respondent_t3))
data$trans.tolerance.dv.t4 <- compute.factor.dv(trans.tolerance.dvs.t4, data$respondent_t4==1 & !is.na(data$respondent_t4))

# Law DV.
# Create outcome scale by averaging over the two questions.
data$miami_trans_law_t0_avg <- (data$miami_trans_law_t0 + data$miami_trans_law2_t0)/2
data$miami_trans_law_t1_avg <- (data$miami_trans_law_t1 + data$miami_trans_law2_t1)/2
data$miami_trans_law_t2_avg <- (data$miami_trans_law_t2 + data$miami_trans_law2_t2)/2
# Note: Beginning with t3, the definition was added. 
data$miami_trans_law_t3_avg <- (data$miami_trans_law_withdef_t3 + 
                                  data$miami_trans_law2_withdef_t3)/2
# Note: Only one question was asked in t3 after the ad was shown, so no averaging is required.
data$miami_trans_law_t4_avg <- (data$miami_trans_law_withdef_t4 + 
                                  data$miami_trans_law2_withdef_t4)/2

# Gender Non-Conformity DV
data$gender_nonconformity_t0 <- compute.factor.dv(gender.nonconformity.t0, data$respondent_t0==1 & !is.na(data$respondent_t0))
data$gender_nonconformity_t1 <- compute.factor.dv(gender.nonconformity.t1, data$respondent_t1==1 & !is.na(data$respondent_t1))
data$gender_nonconformity_t2 <- compute.factor.dv(gender.nonconformity.t2, data$respondent_t2==1 & !is.na(data$respondent_t2))
data$gender_nonconformity_t3 <- compute.factor.dv(gender.nonconformity.t3, data$respondent_t3==1 & !is.na(data$respondent_t3))
data$gender_nonconformity_t4 <- compute.factor.dv(gender.nonconformity.t4, data$respondent_t4==1 & !is.na(data$respondent_t4))
```

## Estimation Procedures

### Contact Rate

```{r, include=FALSE}
# This dummy records whether the intervention was actually delivered vs. was not for any reason.
# Note that we do not use this variable to conduct comparisons only to measure successful contact rates.
data$treatment.delivered <- data$exp_actual_convo == "Trans-Equality" & !is.na(data$canvass_trans_ratingstart)
```

`r sum(data$contacted, na.rm = TRUE)` voters identified themselves at the door after the initial greeting that did not differ by condition. Canvassers then either began an intervention conversation or a placebo conversation. Of the `r sum(data$treat_ind, na.rm = TRUE)` voters who identified themselves at their doors in the treatment group, `r sum(data$treatment.delivered & data$treat_ind==1)` began the conversation and at least described their initial view on the law to the canvasser, rather than refusing to talk at all after identifying themselves. On the other hand, the treatment was inadvertendly delivered to `r sum(data$treatment.delivered & data$treat_ind == 0, na.rm = TRUE)` individuals in the placebo group due to canvasser error. Consistent with our pre-analysis plan, we report estimated complier average causal effects for the intervention under the assumptions that 1) there was no effect of the intervention for the voters who immediately refused to talk, and 2) there are no defiers; that is, no voters only received the intervention if they were assigned to the placebo group yet would not have received it were they actually in the treatment group (*33*). Reporting these point estimates does not change the experimental comparison we conduct, but does increase point estimates slightly to account for the measurement error in the treatment indicator. Relaxing these assumptions and reporting average intent-to-treat effects would decrease the point estimates slightly but would not change any *t*-ratios or *p*-values (*33*).

Note that there is no reclassification of treatment based on what occurs at the door and we do not exclude any subjects who came to the door. We compare all subjects who came to the door and were pre-assigned to the treatment conversation to all subjects who came to the door and were pre-assigned to the placebo conversation.

### Complier Average Causal Effect Estimation

To estimate complier average causal effects, we rely on ordinary least squares (OLS) with cluster-robust standard errors, clustering on household and residualizing using pre-treatment covariates from the baseline survey and voter list. This procedure and these covariates were pre-specified in advance and produce unbiased estimates of causal effects (*33*). We also adjust for the contact rate, as described above. Finally, we implement Olken's rejection rule (*43*) as specified in our pre-analysis plan, which denoted the bottom 1\% and top 4\% of the sampling distribution as the rejection region (instead of either the bottom 2.5\% and top 2.5\% or only top 5\% as is conventional). We report p-values for this region and otherwise report "n.s." (*43*). (The only result this rule affects is the 3-month effect on the law index.)

```{r}
t0.covariate.names <- c('miami_trans_law_t0', 'miami_trans_law2_t0', 'therm_trans_t0', 
'gender_norms_sexchange_t0', 'gender_norms_moral_t0', 'gender_norms_abnormal_t0',
'ssm_t0', 'therm_obama_t0', 'therm_gay_t0','vf_democrat', 'ideology_t0', 
'religious_t0', 'exposure_gay_t0', 'exposure_trans_t0', 'pid_t0', 'sdo_scale',
'gender_norm_daugher_t0', 'gender_norm_looks_t0', 
'gender_norm_rights_t0', 'therm_afams_t0', 'vf_female', 'vf_hispanic',
'vf_black', 'vf_age', 'survey_language_es', 'cluster_level_t0_scale_mean')
x <- data[,c(t0.covariate.names)]
x <- as.matrix(x, dimnames = list(NULL, names(x)))

# Function to compute clustered standard errors, from Mahmood Arai.
cl <- function(fm, cluster){
  M <- length(unique(cluster))
  N <- length(cluster)
  K <- fm$rank
  dfc <- (M/(M-1))*((N-1)/(N-K))
  uj  <- apply(estfun(fm), 2, function(x) tapply(x, cluster, sum))
  vcovCL <- dfc*sandwich(fm, meat=crossprod(uj)/N)
  coeftest(fm, vcovCL)
}

# Function to extract the average treatment effect from OLS with clustered SEs.
est.ate <- function(dv, include.obs = NULL, include.covariates = TRUE){
  if(is.null(include.obs)){
    include.obs <- !is.na(dv) 
  }
  include.obs <- which(include.obs & !is.na(dv))
  
  if(include.covariates) lm.obj <- lm(dv[include.obs] ~ data$treat_ind[include.obs] +
                                        x[include.obs,])
  if(!include.covariates) lm.obj <- lm(dv[include.obs] ~ data$treat_ind[include.obs])
  
  # Calculate cluster-robust standard errors.
  result <- cl(lm.obj, data$hh_id[include.obs])[2,]
  
  # Adjust point estimate and standard error for contact rate in subsample.
  itt_d <- lm(treatment.delivered ~ treat_ind, data[include.obs,])$coefficients[2]
  result[1:2] <- result[1:2] / itt_d
  
  # Per pre-analysis plan, rejection region is top 4% and bottom 1% of sampling distribution,
  # so p-values are reported for this region; otherwise, we write "n.s."
  # See Olken (*43*) , page 70, footnote 5.
  # Note that cl() returns two-tailed p-values that must be converted to one-tailed.
  # Note that all DVs were recoded such that higher values indicated more tolerance.
  result[4] <- result[4] / 2 # p-value corresponds to mass under one side of distribution.
  rejection.region <- ((result[4] < .04 & result[1] > 0) | # Significant positive result.
                         (result[4] < .01 & result[1] < 0)) # Significant negative result.
  result <- round(result, 3)
  if(rejection.region) result[4] <- paste0(as.character(result[4]), "*")
  if(!rejection.region) result[4] <- "*n.s.*"
  if(result[4] == "0*") result[4] <- "0.000*" # Indicate precision of 0 p-value.
  names(result)[4] <- "*p*"
  return(result)
}
```



### Heterogenous Treatment Effects

We searched for heterogenous treatment effects by computing a residualized trans.tolerance.dv.t1 among t1 responders (residualizing using the pre-specified covariates but not the treatment indicator) then testing whether the treatment effect on this residualized index was larger for some subgroups. (Residualizing first makes sure the coefficients on the covariates do not differ within subgroups when we compute estimates within subgroups.) In our pre-analysis plan, we specified three predictions about treatment effect heterogeneity by subject attributes:

1. Democrats will be more treatment-responsive than Republicans as a result of partisan cues being more aligned, 
2. Subjects higher on the baseline support scale will be more treatment-responsive as a result of being more open to outgroups in general, and 
3. Subjects higher in need for cognition will show larger and longer-lasting effects (this scale was only included on the six week survey, so we view this analysis as more exploratory given that it was not measured pre-treatment).

We found evidence for none of these patterns. In the last subsection we also show evidence of insignificant heterogenous treatment effects for a broader set of covariates.

Note that we present tests for the presence of heterogeneous treatment effects for completeness, but the fact that we fail to find such effects may reflect low power meaning we are unable to reject a false null; the below tests should not be construed as our accepting the null of no difference.

```{r, include=FALSE}
# Residualized Outcome
t1 <- subset(data, !is.na(trans.tolerance.dv.t1))
x.t1 <- t1[,c(t0.covariate.names)]
x.t1 <- as.matrix(x.t1, dimnames = list(NULL, names(x.t1)))
t1$t1.resid <- summary(lm(t1$trans.tolerance.dv.t1 ~ x.t1))$residuals
```

#### By Party Registration

We analyze the data two ways. In Table S6, we present the conditional average treatment effect among Democrats, Independents, and Republicans on the trans.tolerance.dv.t1 factor. In Table S7, we present the interaction effect between binary variables for Democrats and Independents and the treatment indicator on the same factor (making Republicans the base category), after having been residualized on the above specified covariates. We find no evidence of heterogeneous treatment effects. (The only hint of a pattern is that Republicans are more affected than Independents.)

Again, recall that because the independent variable has already been residualized, the base terms do not reflect the baseline difference between the groups (e.g., Republicans are indeed less supportive at baseline).

#### By Baseline Support

We analyze the data two ways. In Table S8, we present the conditional average treatment effect among individuals below the mean on the baseline support factor and above the mean on the trans.tolerance.dv.t1 factor. In Table S9, we present the interaction effect between a continuous variable for baseline support and the treatment indicator on the same factor, after having been residualized on the above specified covariates. We find no evidence of heterogeneous treatment effects. 

Note that the correlation between the baseline and the outcome is weak because we compute heterogenous treatment effects on a residualized version of the outcome.

#### By Need for Cognition

We analyze the data two ways. In Table S10, we present the conditional average treatment effect among individuals below the mean on the Need for Cognition factor and above the mean on the trans.tolerance.dv.t1 factor. In Table S11, we present the interaction effect between a continuous variable for Need for Cognition and the treatment indicator on the same factor, after having been residualized on the above specified covariates. We find no evidence of heterogeneous treatment effects.

Recall that the Need for Cognition item was only asked on the third post-treatment survey, not the baseline survey. This means additional caution is warranted because the item was asked post-treatment; it is also not available for individuals who did not complete the t3 survey.

#### Machine Learning Algorithm for Other Subgroups

There are many other covariates available from the voter file and on our survey. In order to avoid a post hoc hypothesis testing exercise that would likely lead us to find at least one such covariate to predict the treatment effect purely by chance, we also implemented a machine learning procedure designed to automatically search for the existence of any robust heterogenous treatment effects (*44*). The procedure relies on the Lasso, a variable selection algorithm. The results return only the intercept, indicating that none of the covariates predict the treatment effect robustly; the treatment is broadly effective among subgroups. We take this result as propitious for the generalizability of the findings.

```{r}
# Residualize the dependent variable, then transform it per (*44*).
t1.resid <- summary(lm(data$trans.tolerance.dv.t1 ~ x))$residuals
data$t1.resid[as.numeric(names(t1.resid))] <- t1.resid # Maps residuals back into data.
data$transformed.outcome <- with(data, t1.resid * (treat_ind - .5) / .25)

# Vectors describing rows where the outcome was observed.
include.obs <- !is.na(data$transformed.outcome)
x.subset <- cbind(data$treat_ind[include.obs], x[include.obs,])
transformed.outcome <- data$transformed.outcome[include.obs]

# Lasso.
cvfit.lasso <- cv.glmnet(x.subset, transformed.outcome, alpha = 1)
coef(cvfit.lasso, s = "lambda.min")
```

## Tests of Design Assumptions

### Covariate Balance among All Subjects, Compliers, and Reporters

Tables S12-S17 demonstrate that balance on pre-treatment observable attributes is maintained among the original universe of pre-survey respondents randomized to each group, the subsample that was canvassed, and the subsample that was both canvassed and successfully re-interviewed. Each table shows the mean value for the covariate under treatment and placebo as well as the *p*-value from a *t*-test of the difference in means. Table S12 considers all voters who were randomly assigned after having taken the pre-survey (all subjects); Table S13 considers all voters who were successfully contacted (compliers); Tables S14-S17 considers all voters who responded to the first through fourth post-survey (reporters).

### Survey Attrition

An important design assumption is that the treatment does not affect the composition of the individuals who take each follow-up survey (*33*).

#### Test of Average Differential Attrition

Table S18 shows the counts of respondents to each survey wave by experimental condition. 

#### Test of Differential Attrition by Covariates

The above subsection demonstrated that there was no average differential attrition; now, we test for whether the treatment caused attrition to differ by covariates (for example, whether it encouraged already-supportive subjects to complete the post-survey but also discouraged unsupportive subjects from doing so) *(33, 45)*. To test whether attrition patterns are similar by covariates in treatment and placebo, we use a linear regression of whether or not an individual responded to the follow-up survey on treatment, baseline covariates, and treatment-covariate interactions. We then perform a heteroskedasticity-robust F-test of the hypothesis that all the interaction coefficients are zero. For this test, we compare the F-statistic in the observed data to a reference distribution of F-statistics that would be observed under the sharp null hypothesis. This procedure was pre-specified in our pre-analysis plan and is standard practice *(33)*.

Based on the results presented in Table S19, there does not appear to be evidence of asymmetrical attrition.

### Representativeness

Table S20 demonstrates that the subjects remained representative of the starting universe at each stage.

### Placebo Tests On Additional Survey Items

A reviewer helpfully noted that we can use the survey items unrelated to prejudice, discrimination, or LGBT people as placebo tests where none of these items change in the manner that the transgender attitude items change. This test was not included in our pre-analysis plan, but is reported in Table S21 for some of the distractor items. There were hundreds of items across all the follow-up surveys.  In Table S21 we show that thermometer ratings of President Obama, Jeb Bush, marijuana users, police officers, firefighters, and former Prime Minister Mir-Hossein Mousavi were similar across conditions. Note that not all of these items were asked on all of the follow-up surveys. We report all results for which the question was asked and all the items we examined.

## Further Explanation of and Replication Code for Results in Main Text

### Results In Main Text

For specificity and transparency, below we list the replication code that produces every numerical or statistical result described in the main text. We also elaborate on some of the results that space constraints prevented us from explaining further in the main text.

* "Conversations lasted around 10 minutes on average.""
```{r}
mean(data$canvass_minutes[data$treatment.delivered], na.rm=TRUE)
```

* "In addition, geographic clusters of respondents were randomly assigned to receive the intervention from either a transgender (n=15) or non-transgender (n=41) volunteer.""
```{r}
nrow(aggregate(data$canvasser_trans[data$canvasser_trans==1], 
list(data$canvasser_id[data$canvasser_trans==1]), unique))
nrow(aggregate(data$canvasser_trans[data$canvasser_trans==0], 
list(data$canvasser_id[data$canvasser_trans==0]), unique))
```

* "To measure outcomes, we conducted follow-up surveys of individuals who had come to their doors in either condition (n=501)."
```{r}
table(data$contacted)
```

* "These surveys began three days (n = 429), three weeks (n = 399), six weeks (n = 401), and three months (n = 385) after the canvassing took place."
```{r}
table(data$respondent_t1)
table(data$respondent_t2)
table(data$respondent_t3)
table(data$respondent_t4)
```

* Although not described in the main text, there is a clear effect on the index of all primary outcomes pre-specified in advance.
```{r}
est.ate(data$all.dvs.t1)
```

* "Before the intervention, the treatment and placebo groups scored similarly on this index." See also tables S13-S17.
```{r}
est.ate(data$trans.tolerance.dv.t0, include.covariates = FALSE)
```

* "After the intervention, the treatment group was considerably more accepting of transgender people than the placebo group (t = 4.03; p < 0.001)."
```{r}
est.ate(data$trans.tolerance.dv.t1)
```

* "These effects are substantively large: these brief conversations increased positivity towards transgender people on a feeling thermometer (20, 21) by approximately 10 points, an amount larger than the secular increase in positive affect towards gay men and lesbians among Americans between 1998 and 2012 (8.5 points; see table S22)."

```{r}
est.ate(data$therm_trans_t1)
```

To contextualize these results, we compare the treatment effect observed in the current study to the change over time in American public opinion towards gay men using the feeling thermometer in the American National Election Studies (*46*). The treatment effect in the current study on the transgender feeling thermometer at 3 days was `r est.ate(data$therm_trans_t1)[1]`, which is larger than the change in the ANES feeling thermometer for gay men from 1998 to 2012 (see Table S22).

* "Fig. 1 shows the point estimates at each wave and reveals that these effects persisted longitudinally: the treatment group remained more accepting in every follow-up survey (t-tests; all ps < 0.01)."

Replication code for Fig 1. is available below. Below are the estimates for each follow-up wave. Note that the point estimates are not necessarily comparable across waves because the composition of respondents changes slightly and the factor-analysis is re-computed at each wave.

```{r}
est.ate(data$trans.tolerance.dv.t2)
est.ate(data$trans.tolerance.dv.t3)
est.ate(data$trans.tolerance.dv.t4)
```

* "The intervention was also broadly effective: the effects are significant at the p < 0.01 level for both registered Democrats and registered Republicans (see table S6) and for those who began more and less supportive than average (t-tests; see table S8)."

Please refer to the section entitled "Heterogenous Treatment Effects."

* "Finally, conversations with transgender and non-transgender canvassers were both effective (t-tests; see table S5). Tables S1-S4 show estimates for each item at each wave."

Please see the section entitled "Comparison of Transgender and Non-Transgender canvassers."

```{r}
est.ate(data$trans.tolerance.dv.t1, data$canvasser_trans == 1)
est.ate(data$trans.tolerance.dv.t1, data$canvasser_trans == 0)
est.ate(data$all.dvs.t1, data$canvasser_trans == 1)
est.ate(data$all.dvs.t1, data$canvasser_trans == 0)
```

* "there was no difference between the treatment and placebo groups’ support for a law protecting transgender people from discrimination in the three-day and three-week follow-up surveys."

```{r}
est.ate(data$miami_trans_law_t1_avg)
est.ate(data$miami_trans_law_t2_avg)
```

* "treatment subjects were 0.36 scale points more supportive of the law protecting this group than treatment subjects once the survey question defined the term transgender (t = 2.20; p < 0.05). "
```{r}
est.ate(data$miami_trans_law_t3_avg)
```

* "First, the intervention’s effect withstood this attack: the canvassing intervention treatment group remained 0.40 scale points more supportive of the law than the placebo group (t = 1.77; p < 0.05). "
```{r}
est.ate(data$trans_law_post_ad_t3)
```

* "However, subjects in the canvassing treatment group remained 0.30 scale points more supportive than placebo subjects in the three-month survey (t = 1.94; p < 0.05). "
```{r}
est.ate(data$miami_trans_law_t4_avg)
```

* "The intervention was effective among all pre-specified subgroups, including political parties.""

Please refer to the section entitled "Heterogenous Treatment Effects."

* "Canvassers did not require extensive experience: both first-time and experienced canvassers were effective."

```{r}
est.ate(data$trans.tolerance.dv.t1, data$canvasser_experience=="No")
est.ate(data$trans.tolerance.dv.t1, data$canvasser_experience=="Yes")
```

```{r, include=FALSE}
# To display the above nicely as a table.
canvasser.experience.lm <- summary(lm(t1$t1.resid ~ t1$treat_ind * as.factor(t1$canvasser_experience=="Yes")))$coefficients
rownames(canvasser.experience.lm) <-  c("Estimate", "Std. Error", "*t*", "*p*")
set.caption("Heterogenous Effects By Canvasser Experience")
pander(canvasser.experience.lm)
```

### Code to Produce Figures

#### Code to Produce Figure 1

The below code was used to produce Figure 1.

```{r, fig.width=8, fig.height=8, warning=FALSE}
# Estimate the treatment effect for ALL canvassers
t1.all <- est.ate(data$trans.tolerance.dv.t1)
t2.all <- est.ate(data$trans.tolerance.dv.t2)
t3.all <- est.ate(data$trans.tolerance.dv.t3)
t4.all <- est.ate(data$trans.tolerance.dv.t4)

# Estimate the treatment effect by trans and cis canvassers
#At 3 day survey
t1.trans <- est.ate(data$trans.tolerance.dv.t1,
                    data$canvasser_trans == 1)
t1.cis <- est.ate(data$trans.tolerance.dv.t1,
                  data$canvasser_trans == 0)

#At 3 week survey
t2.trans <- est.ate(data$trans.tolerance.dv.t2,
                    data$canvasser_trans == 1)
t2.cis <- est.ate(data$trans.tolerance.dv.t2,
                  data$canvasser_trans == 0)

#At 6 week survey
t3.trans <- est.ate(data$trans.tolerance.dv.t3,
                    data$canvasser_trans == 1)
t3.cis <- est.ate(data$trans.tolerance.dv.t3,
                  data$canvasser_trans == 0)

#At 3 month survey
t4.trans <- est.ate(data$trans.tolerance.dv.t4,
                    data$canvasser_trans == 1)
t4.cis <- est.ate(data$trans.tolerance.dv.t4,
                  data$canvasser_trans == 0)


# Make DF of summary stats
summary.stats.df <- as.data.frame(rbind(t1.all, t2.all,
                          t3.all, t4.all,
                          t1.trans, t1.cis,
                          t2.trans, t2.cis,
                          t3.trans, t3.cis,
                          t4.trans, t4.cis),
                          stringsAsFactors = FALSE)

# Change from strings back to numeric, and remove t- and p-values, which are not used.
summary.stats.df <- summary.stats.df[,1:2]
summary.stats.df[,1] <- as.numeric(summary.stats.df[,1])
summary.stats.df[,2] <- as.numeric(summary.stats.df[,2])

# Better variable names
names(summary.stats.df) <- c("point.estimate", "se")

# Map row names of summary.stats.df into days
unique.days <- c(3, 3*7, 6*7, 12*7)
summary.stats.df$days <- unique.days[as.numeric(substr(row.names(summary.stats.df), 2, 2))]

# Read canvasser group from row names
canvasser.label.map <- list(all = "All",
                            tra = "Transgender/Gender\nNon-Conforming Only",
                            cis = "Non-Transgender Only")
summary.stats.df$Canvasser <- factor(as.character(
  canvasser.label.map[substr(row.names(summary.stats.df), 4, 6)]
  ))

# X position of different canvasser groups
summary.stats.df$xpos <- with(summary.stats.df, days + as.numeric(Canvasser) -
                                mean(as.numeric(Canvasser)))

# Point estimate Y
summary.stats.df$point.estimate.y <- summary.stats.df$point.estimate
  # Fix text overlap of point estimate labels.
  summary.stats.df$point.estimate.y[9] <- summary.stats.df$point.estimate.y[9] + .003
  summary.stats.df$point.estimate.y[3] <- summary.stats.df$point.estimate.y[3] - .003

# Compute CIs
summary.stats.df$se.high <- summary.stats.df$point.estimate + summary.stats.df$se
summary.stats.df$se.low <- summary.stats.df$point.estimate - summary.stats.df$se
summary.stats.df$ci.high <- summary.stats.df$point.estimate + summary.stats.df$se * 1.96
summary.stats.df$ci.low <- summary.stats.df$point.estimate - summary.stats.df$se * 1.96

summary.stats.df$point.estimate.label <- paste0(round(summary.stats.df$point.estimate,
                                                      2)," SDs")

g <- ggplot(summary.stats.df,
            aes(x=xpos, y=point.estimate,
                group=Canvasser, color=Canvasser)) +
  theme_classic() +
  # CIs
  geom_linerange(aes(ymin=se.low, ymax=se.high), lwd=1) +
  geom_linerange(aes(ymin=ci.low, ymax=ci.high)) +
  # Point estimate points
  geom_point(color="black") +
  # Point estimate markers
  annotate("text", label=summary.stats.df$point.estimate.label,
           x = summary.stats.df$xpos + 6.3,
           y = summary.stats.df$point.estimate.y,
           size = 3) +
  # Canvassing treatment line / label
  geom_vline(xintercept = 0, linetype = "dashed") +
  annotate("text", label = "Canvassing Treatment",
           x = -1.5, y = .3, size = 3.5, angle = 90) +
  # Day labels
  annotate("text",
           label = c("+3 Days", "+3 Weeks", "+6 Weeks", "+3 Months"),
           x = unique.days, y = -.04,
           colour = "black", size = 3) +
  # Y axis
  ylab("Effect on Transgender Tolerance Scale, in Standard Deviations") + 
  scale_y_continuous() +
  # X axis
  xlab("Days After Canvassing Treatment") +
  geom_hline(yintercept = 0) +
  # Overall Title and Legend
  ggtitle("Differences Between Treatment and Placebo") +
  guides(fill=FALSE) +
  theme(legend.position = "bottom")
ggsave("figure1.pdf", g, width=8, height=6, units="in")
```


\newpage

**Table S24.** Codebook

Variable | Description
--------- | ---------
  id | Respondent ID
vf_age | Voter File Age
vf_party | Voter File Party
vf_racename | Voter File Race
vf_female | Voter File Female
vf_black | Voter File AfAm
vf_white | Voter File White
vf_hispanic | Voter File Hispanic
vf_vg_14 | Voter File Voted in 2014
vf_vg_12 | Voter File Voted in 2012
vf_vg_10 | Voter File Voted in 2010
vf_democrat | Voter File: Registered Democrat
vf_republican | Voter File: Registered Republican
miami_trans_law_t0 | See Outcomes section
miami_trans_law2_t0 | See Outcomes section
gender_norm_daugher_t0 | Parents usually maintain stricter control over their daughters than their sons
gender_norm_looks_t0 | See Outcomes section
gender_norm_rights_t0 | See Outcomes section
gender_norms_sexchange_t0 | See Outcomes section
gender_norms_moral_t0 | See Outcomes section
gender_norms_abnormal_t0 | See Outcomes section
gender_norm_trans_moral_wrong_t0 | See Outcomes section
ssm_t0 | Pre-survey, same sex marriage support
therm_obama_t0 | Pre-survey, Obama feeling therm
therm_rubio_t0 | Pre-survey, Rubio feeling therm
therm_gay_t0 | Pre-survey, gay men feeling therm
therm_trans_t0 | See Outcomes section
therm_marijuana_t0 | Pre-survey, marijuana user feeling therm
therm_afams_t0 | Pre-survey, AfAm feeling therm
therm_immigrant_t0 | Pre-survey, immigrant feeling therm
therm_muslims_t0 | Pre-survey, Muslim feeling therm
ideology_t0 | Pre-survey, political ideology
religious_t0 | Pre-survey, religiousity
respondent_t0 | Responded to pre-survey
exposure_gay_t0 | Pre-survey, knows gay people
exposure_trans_t0 | Pre-survey, knows trans people
pid_t0 | Pre-survey, partisanship
scale_for_blocking_t0 | Pre-survey, factor used for blocking
miami_trans_law_t1 | See Outcomes section
miami_trans_law2_t1 | See Outcomes section
therm_trans_t1 | See Outcomes section
gender_norm_looks_t1 | See Outcomes section
gender_norm_rights_t1 | See Outcomes section
gender_norm_sexchange_t1 | See Outcomes section
gender_norm_moral_t1 | See Outcomes section
gender_norm_abnormal_t1 | See Outcomes section
gender_norm_trans_moral_wrong_t1 | See Outcomes section
respondent_t1 | 3 Day Survey Respondent
miami_trans_law_t2 | See Outcomes section
miami_trans_law2_t2 | See Outcomes section
therm_trans_t2 | See Outcomes section
gender_norm_looks_t2 | See Outcomes section
gender_norm_rights_t2 | See Outcomes section
gender_norm_moral_t2 | See Outcomes section
gender_norm_dress_t2 | See Outcomes section
gender_norm_sexchange_t2 | See Outcomes section
gender_norm_abnormal_t2 | See Outcomes section
gender_norm_trans_moral_wrong_t2 | See Outcomes section
trans_teacher_t2 | See Outcomes section
trans_bathroom_t2 | See Outcomes section
respondent_t2 | 3 Week Survey Respondent
miami_trans_law_withdef_t3 | See Outcomes section
miami_trans_law2_withdef_t3 | See Outcomes section
therm_trans_t3 | See Outcomes section
gender_norm_looks_t3 | See Outcomes section
gender_norm_rights_t3 | See Outcomes section
gender_norm_moral_t3 | See Outcomes section
gender_norm_dress_t3 | See Outcomes section
gender_norm_sexchange_t3 | See Outcomes section
gender_norm_abnormal_t3 | See Outcomes section
gender_norm_trans_moral_wrong_t3 | See Outcomes section
trans_teacher_t3 | See Outcomes section
trans_bathroom_t3 | See Outcomes section
trans_ad_displayed_t3 | Did the opposing message ad properly play?
trans_law_post_ad_t3 | See Outcomes section
respondent_t3 | 6 Week Survey Respondent
nfc_t3 | Need for Cognition Scale
marijuana_pread1 | Support legalizing marijuana
marijuana_postad | Support legalizing marijuana
miami_trans_law_withdef_t4 | See Outcomes section
miami_trans_law2_withdef_t4 | See Outcomes section
therm_trans_t4 | See Outcomes section
gender_norm_looks_t4 | See Outcomes section
gender_norm_rights_t4 | See Outcomes section
gender_norm_moral_t4 | See Outcomes section
gender_norm_dress_t4 | See Outcomes section
gender_norm_sexchange_t4 | See Outcomes section
gender_norm_abnormal_t4 | See Outcomes section
gender_norm_trans_moral_wrong_t4 | See Outcomes section
trans_teacher_t4 | See Outcomes section
trans_bathroom_t4 | See Outcomes section
respondent_t4 | 3 Month Survey Respondent
exp_actual_convo | Actual Treatment Delivered (as opposed to assigned)
contacted | Voter came to door
survey_language_es | Survey conducted in Spanish
sdo_scale | Pre-survey, social dominance orientation scale
treat_ind | Treatment assignment
canvass_trans_ratingstart | In canvass, rating of anti-discrimination law
canvass_minutes | Length of canvass conversation
canvasser_experience | Canvasser previous experience
canvasser_trans | Canvassed identified as transgender or gender non-conforming
canvasser_id | Canvasser identifier
hh_id | Household identifier
block_ind | Block Identifier
cluster_level_t0_scale_mean | Scale used for blocking at household level
survey_language_t0 | Survey language

\newpage

